(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{2623:function(t,e,n){},3496:function(t,e,n){"use strict";n(2623)},4613:function(t,e,n){"use strict";n.r(e);n(16),n(15),n(11),n(7),n(14),n(22);var r=n(5),o=n(0),c=n(85),l=n(3),d=n(183),f=n(18),m=n(860),v=n(40);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w="@/view/notification/user/UPDATE_STATE",_={data:function(){return{NewsTypes:f.d,isViewNavOnTop:!1,cursor:"0",limit:20,list:[],hasMore:!1,isLoading:!1}},head:function(){var title={comment:"评论消息 - 掘金",digg:"点赞消息 - 掘金",follow:"关注消息 - 掘金",im:"私信消息 - 掘金",system:"系统消息 - 掘金"}[this.$route.params.type]||"评论消息 - 掘金";return Object(m.d)({title:title},this.$route.path,{})},computed:h(h({},Object(c.mapGetters)({user:l.USER,unreadNotificationCount:l.UNREAD_NOTIFICATION_COUNT})),{},{state:function(){return this.$store.state.view.notification.user},unReadCount:function(){return this.state.listState.msgSubMap}}),watch:{$route:function(t){this.cursor="0";var e=t.params.type,n=this.getMessageTypeCode(e);this.fetchData(n)}},methods:{onHeaderVisibilityChanged:function(t){this.isViewNavOnTop=!t},fetchData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,data,cursor,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=e.user)&&void 0!==r&&r.id){n.next=2;break}return n.abrupt("return",e.$requestLogin());case 2:if(Object(d.b)().then((function(t){var n=t.count,r=t.total;e.$store.commit(w,{listState:h(h({},e.state.listState),{},{msgTotal:r,msgSubMap:n})})})),t!==f.d.recruitment){n.next=5;break}return n.abrupt("return");case 5:return e.$store.commit(w,{listState:h(h({},e.state.listState),{},{isLoading:!0})}),n.next=8,Object(d.c)({messageType:t,cursor:e.cursor,limit:e.limit});case 8:o=n.sent,c=o.data,data=void 0===c?[]:c,cursor=o.cursor,l=o.has_more,data[0]&&data[0].message&&data[0].message.id&&Object(d.d)({messageType:t,latestId:data[0].message.id}),e.cursor=cursor,e.list=data,e.hasMore=l,e.$store.commit(w,{listState:h(h({},e.state.listState),{},{cursor:e.cursor,list:e.list,hasMore:e.hasMore,messageType:t,isLoading:!1})});case 18:case"end":return n.stop()}}),n)})))()},getMessageTypeCode:function(t){return{comment:f.d.comment,digg:f.d.digg,follow:f.d.follow,system:f.d.system,recruitment:f.d.recruitment}[t]||f.d.comment},handleImTea:function(){Object(v.d)("private_msg_page_show",{visit_source:"notification_tab_change"})}},created:function(){var t=this.$route.params.type,e=this.getMessageTypeCode(t);this.fetchData(e)}},T=(n(3496),n(29)),component=Object(T.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view-container",{attrs:{"with-view-nav":!0},on:{headerVisibilityChanged:t.onHeaderVisibilityChanged}},[n("div",{staticClass:"view notification-view"},[n("nav",{staticClass:"view-nav",class:{top:t.isViewNavOnTop},attrs:{role:"navigation"}},[n("ul",{staticClass:"nav-list"},[n("router-link",{staticClass:"nav-item link",class:{active:void 0===t.$route.params.type},attrs:{tag:"li",to:{path:"/notification"}}},[n("span",{staticClass:"title"},[t._v("评论")]),t._v(" "),t.unReadCount[t.NewsTypes.comment]?n("span",{staticClass:"unread-count"},[t._v("\n            "+t._s(t.unReadCount[t.NewsTypes.comment])+"\n          ")]):t._e()]),t._v(" "),n("router-link",{staticClass:"nav-item link",class:{active:"digg"===t.$route.params.type},attrs:{tag:"li",to:{path:"/notification/digg"}}},[n("span",{staticClass:"title"},[t._v("点赞")]),t._v(" "),t.unReadCount[t.NewsTypes.digg]?n("span",{staticClass:"unread-count"},[t._v("\n            "+t._s(t.unReadCount[t.NewsTypes.digg])+"\n          ")]):t._e()]),t._v(" "),n("router-link",{staticClass:"nav-item link",class:{active:"follow"===t.$route.params.type},attrs:{tag:"li",to:{path:"/notification/follow"}}},[n("span",{staticClass:"title"},[t._v("关注")]),t._v(" "),t.unReadCount[t.NewsTypes.follow]?n("span",{staticClass:"unread-count"},[t._v("\n            "+t._s(t.unReadCount[t.NewsTypes.follow])+"\n          ")]):t._e()]),t._v(" "),n("router-link",{staticClass:"nav-item link",class:{active:"im"===t.$route.params.type},attrs:{tag:"li",to:{path:"/notification/im"}},nativeOn:{click:function(e){return t.handleImTea(e)}}},[n("span",{staticClass:"title"},[t._v("私信")]),t._v(" "),t.unReadCount[t.NewsTypes.im]?n("span",{staticClass:"unread-count"},[t._v("\n            "+t._s(t.unReadCount[t.NewsTypes.im]>99?"99+":t.unReadCount[t.NewsTypes.im])+"\n          ")]):t._e()]),t._v(" "),n("router-link",{staticClass:"nav-item link",class:{active:"system"===t.$route.params.type},attrs:{tag:"li",to:{path:"/notification/system"}}},[n("span",{staticClass:"title"},[t._v("系统消息")]),t._v(" "),t.unReadCount[t.NewsTypes.system]?n("span",{staticClass:"unread-count"},[t._v("\n            "+t._s(t.unReadCount[t.NewsTypes.system])+"\n          ")]):t._e()])],1)]),t._v(" "),n("router-view")],1)])}),[],!1,null,"78a0d56e",null);e.default=component.exports},858:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return m}));var r="掘金,稀土,Vue.js,前端面试题,Kotlin,ReactNative,Python",o="掘金是面向全球中文开发者的技术内容分享与交流平台。我们通过技术文章、沸点、课程、直播等产品和服务，打造一个激发开发者创作灵感，激励开发者沉淀分享，陪伴开发者成长的综合类技术社区。",c="https://juejin.cn",l="juejin.cn",d=function(t){return"".concat(t,"技术、学习、经验文章掘金开发者社区搜索结果。掘金是一个帮助开发者成长的社区，").concat(t,"技术文章由稀土上聚集的技术大牛和极客共同编辑为你筛选出最优质的干货，用户每天都可以在这里找到技术世界的头条内容，我们相信你也可以在这里有所收获。")},f="掘金,科技资讯,开源新闻,开源软件,Vue.js,go mod,netty,后端,谷歌,亚马逊,GitHub",m="掘金是目前领先的中文开发者社区，致力帮助开发者成长，为开发者提供新鲜的科技行业动态、开源项目和编程语言动态。掘金是给开发者用的 Hacker News，给设计师用的 Designer News，和给产品经理用的 Medium。"},860:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return v}));n(46);var r=n(858),o=n(861);function c(t,e){t=t||{},e=e||t.parsedContent;var title=t.title||"",content=(e||"").replace(/<.*?>/g,"")||t.content;return{title:title,keywords:l((t.tags||[]).map((function(t){return t.title}))),description:d(content)}}function l(t){return(t=t||[]).join(",").replace(/[\r\n\s]+/g," ")}function d(t){return(t=(t||"").trim().slice(0,130)).replace(/[\r\n\s]+/g," ")}function f(){var path=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",link=[{rel:"canonical",href:"".concat(r.f).concat(path)}];return{link:link}}function m(t){return{title:t.title,meta:[{vmid:"description",name:"description",content:t.description},{vmid:"keywords",name:"keywords",content:t.keywords}]}}function v(t,path,e){return t.keywords||(t.keywords=r.b),t.description||(t.description=r.a),m(Object(o.buildTdk)(t,r.e,path,e))}},861:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function d(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,d)}f((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.setTdkTemplateList=e.getTdkTemplateList=e.buildTdk=void 0;var l=c(n(892)),d=n(862),f=n(864),m=n(865),v=[],y=null,h=!1;function w(t){return r(this,void 0,void 0,(function(){var e,data,n,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.default.request({url:"https://seo"+(h?"-boe":"")+".bytedance.net/api/tdk/query",method:"post",data:{site:t}})];case 1:if(e=o.sent(),data=e.data,(n=e.status)>=400)throw new Error("获取 TDK 失败，status code: "+n);if(data.errno)throw new Error("获取 TDK 失败，errno: "+data.errno+",message: "+data.message);return C(data.data),[3,3];case 2:return r=o.sent(),console.warn(r),[3,3];case 3:return[2]}}))}))}function _(template,t){var e=template.replace(/\{\{\s*(\w+)\s*\}\}/g,"{{$1}}");for(var n in t)e=e.replace("{{"+n+"}}",t[n]);return e.replace(/{{([\s\S]+?)}}/g,"")}function T(path,t){var e=function(path,t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(d.isMatch(path,r.path))return r}}(path,v);return e?{title:_(e.title,t),description:_(e.description,t),keywords:_(e.keywords,t)}:{title:"",description:"",keywords:""}}function k(t){return!t.title&&!t.description&&!t.keywords}function C(t){v=JSON.parse(JSON.stringify(t))}e.buildTdk=function(t,e,path,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=36e5),h=r;var c={title:"",description:"",keywords:""};try{if("string"!=typeof e||"string"!=typeof path)throw new Error("由模板构建 TDK 时，必须要传入合法 site 和 path，当前 site="+e+"，path="+path);c=T(path,n),m.isSsrServer()&&(!function(t,e){t<3e5&&(console.warn("模板刷新时间间隔不能小于 5 分钟，当前设置 "+t+"ms"),t=3e5),y||(y=setInterval((function(){w(e)}),t*(1+.1*(Math.random()-.5))),w(e))}(o,e),f.metricsEmitCounter("tdk.build",1,"toutiao.growth.seo_platform",{site:e||"empty",path:path||"empty",fallback:+k(c),tdkTemplateListLength:v.length,errMsg:"success"}))}catch(t){console.warn(t),m.isSsrServer()&&f.metricsEmitCounter("tdk.build",1,"toutiao.growth.seo_platform",{site:e||"empty",path:path||"empty",fallback:+k(c),tdkTemplateListLength:v.length,errMsg:t.toString()})}return k(c)?(console.warn("使用兜底 TDK"),t):c},e.getTdkTemplateList=function(){return JSON.parse(JSON.stringify(v))},e.setTdkTemplateList=C},862:function(t,e,n){"use strict";const r=n(863),o=new Map;function c(pattern,t){t={caseSensitive:!1,...t};const e=pattern+JSON.stringify(t);if(o.has(e))return o.get(e);const n="!"===pattern[0];n&&(pattern=pattern.slice(1)),pattern=r(pattern).replace(/\\\*/g,"[\\s\\S]*");const c=new RegExp(`^${pattern}$`,t.caseSensitive?"":"i");return c.negated=n,o.set(e,c),c}t.exports=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof e}`);if(0===e.length)return t;const r="!"===e[0][0];e=e.map(pattern=>c(pattern,n));const o=[];for(const input of t){let t=r;for(const pattern of e)pattern.test(input)&&(t=!pattern.negated);t&&o.push(input)}return o},t.exports.isMatch=(input,pattern,t)=>{const e=Array.isArray(input)?input:[input],n=Array.isArray(pattern)?pattern:[pattern];return e.some(input=>n.every(pattern=>{const e=c(pattern,t),n=e.test(input);return e.negated?!n:n}))}},863:function(t,e,n){"use strict";t.exports=t=>{if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},864:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.metricsEmitCounter=void 0;e.metricsEmitCounter=function(t,e,n,r){null}},865:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSsrServer=void 0,e.isSsrServer=function(){try{return!(window&&document&&location&&alert)}catch(t){return!0}}}}]);